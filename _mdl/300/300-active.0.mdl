#!/usr/bin/perl
# USE UTF-8 !!!
package Tomahawk::module;
use open ':utf8', ':std';
use Encode;
use encoding 'utf8';
use utf8;
use strict;
use Digest::MD5  qw(md5 md5_hex md5_base64);
use App::300;

sub execute
{
	my %env=@_;
	Tomahawk::GetXSGN(-convertvars=>1) || return undef;
	return 1 unless $env{'login'} && $env{'domain'} && $env{'active'};

	my $sql = "
	UPDATE TOM.a300_users
	SET active='$env{active}'
	WHERE login='$env{login}' AND domain='$env{domain}'
	";

	my $sql_arch = "
	UPDATE TOM.a300_users_arch
	SET active='$env{active}'
	WHERE login='$env{login}' AND domain='$env{domain}'
	";

	$XSGN{TMP} = $XSGN{RESULT_success};
	$XSGN{TMP} =~ s|<%active%>|$env{'active'}|g;
	my $db = $main::DB{main}->Query( $sql );
	my $db_arch = $main::DB{main}->Query( $sql_arch );

	return 1;
}
1;
