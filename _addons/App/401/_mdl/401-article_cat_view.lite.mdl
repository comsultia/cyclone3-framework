#!/usr/bin/perl
# USE UTF-8 !!!
package Tomahawk::module;
use open ':utf8', ':std';
use encoding 'utf8';
use utf8;
use strict;



=head1 NAME

401-article_cat_view.lite.mdl

=head1 DESCRIPTION

Lite view of article_cat

=head1 DEPENDS

=over

=item *

L<App::401::_init|app/"401/_init.pm">

=back

=cut

use App::401::_init;



=head1 INPUTS

=over

=item *

B<article_cat.ID> - ID of article_cat

=item *

B<article_cat.status> - required status (default 'Y')

=back

=cut



sub execute
{
	my %env=@_;
	Tomahawk::GetXSGN('-convertvars'=>1) || return undef;
	
	if (!$env{'article_cat.ID'})
	{
		$XSGN{'TMP'}=$XSGN{'RESULT_failure_no_input'};
		$XSGN{'TMP'}=~s|<%missing_parameter%>|article_cat.ID|g;
		return 1;
	}
	
	$env{'article_cat.status'}='Y' unless $env{'article_cat.status'};
		my $sql_status=join "','", split('',$env{'article_cat.status'});
	
	my $sql=qq{
		SELECT
			cat.*
		FROM
			`$App::401::db_name`.a401_article_cat AS cat
		WHERE
			cat.ID='$env{'article_cat.ID'}' AND
			cat.status IN ('$sql_status')
		LIMIT 1
	};
	
	my %sth0=TOM::Database::SQL::execute($sql,'log'=>1,'slave'=>1);
	if (my %db0_line=$sth0{'sth'}->fetchhash())
	{
		$XSGN{'TMP'}=~s|<%db_(.*?)%>|$db0_line{$1}|g;
	}
	
	return 1;
}


our $authors="open\@comsultia.com";

=head1 AUTHORS

Comsultia, Ltd. (open@comsultia.com)

=cut

1;
