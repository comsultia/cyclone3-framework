sub BaseModul{
require "_table.m";
require "_info.m";

my $page_limit=20;
my $page_from=$page_limit*$form{page};
$form{page}="0" unless $form{page};

my $info=&info_create(
'icon'	=>	True,
'title'	=>	"Portal config",
'next'	=>	$form{page},
'prev'	=>	$form{page}
);


my $table=HP_TABLE->new(
'title'			=>	"Portal config",
'cellspacing'	=>	1,
'cellpadding'	=>	1,
'color_active'	=>	"#F0F0C0",
'link_core'		=>	"core.pl?type=$form{type}&",
'define'		=>	
{
'2'	=>
	{
	'id'		=>	"variable",
	'code'		=>	"<%1%>",
	'select'	=>	"orderby=variable",
	'class'		=>	"td_act"
	},
'3'	=>
	{
	'id'		=>	"value",
	'code'		=>	"<%1%>",
	'td_plus'	=>	"nowrap"
	},
'1'	=>
	{
	'id'		=>	"type",
	'code'		=>	"<B><%1%></B>",
	'select'	=>	"orderby=type,variable",
	'class'		=>	"td_act"
	},
'4'	=>
	{
	'id'		=>	"about",
	'code'		=>	"<%1%>",
	'class'		=>	"td_act",
	'td_plus'	=>	"nowrap"
	}
}
);

my $orderby="ORDER BY variable";
if ($form{'orderby'}){$orderby="ORDER BY $form{'orderby'}";}

my $db_micro = $dbh->Query("SELECT variable,value,type,about FROM _config WHERE type<>'CACHE' $orderby LIMIT $page_from,$page_limit");
while (my @db_micro_line=$db_micro->FetchRow())
{
 
 my $cl_class="tr2";
 my $cl_color="#8FADF9";

 $db_micro_line[1]=~s|\n|<BR>|g;
 	
$table->add(
'class'		=>	$cl_class,
'color'		=>	$cl_color,
'define'	=>{

'variable'	=>
{'1'=>"<a href=\"core.pl?type=portconf_edit&variable=$db_micro_line[0]\" target=\"frm_micro\">".$db_micro_line[0]."</a>"},

'about'	=>
{'1'=>$db_micro_line[3]},

'type'	=>
{'1'=>$db_micro_line[2]},

'value'	=>
{'1'=>$db_micro_line[1]},

});

}


return $info.$table->HTML;}













1;