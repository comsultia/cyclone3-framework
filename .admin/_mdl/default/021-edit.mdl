sub BaseModul
{
 my $id=$form{ID} if ($form{ID});
 if ($form{set})
 {
  $HTML_HEADER{BODY}{extract}="yes";
  $description=&convert_html($form{description});
  my $temp;

  if ($id)
  {
   $dbh->Query("UPDATE markiza_sk.a021_program SET rating='$form{rating}',name='$form{name}',description='$description' WHERE ID='$id' LIMIT 1");
  }
  return "\n<script>\nparent.document.frames['frm_base'].location.reload();\n</script>";
 }
 else #tu je ten predel dopice tam!!!------------------------------------------------------------------------------------------------------
 {
  $HTML_HEADER{BODY}{extract}="yes";
  #$HTML_HEADER{BODY}{onunload}="parent.box_loading.style.display='block';";
  $db_micro = $dbh->Query("SELECT * FROM markiza_sk.a021_program WHERE ID='$id' LIMIT 1");
  %db_micro_line=$db_micro->FetchHash();
  #return $db_micro_line{title};

  #action="core.pl?type=$form{type}&id=$id&set=yes&image=$db_micro_line{xrelated}" method="POST">


########for testing purposes .. targeting into the same frame
  my $mdl_temp=<<"HEADER";
  <table width=100% cellspacing=0 cellpadding=0 border=0><tr><td>
  <form name="programEdit\_$id" action="core.pl?type=021-edit&ID=$id&set=yes" method="POST" enctype="multipart/x-form-data" target="frm_micro">
  </td><td width=100% style="FONT:10px Verdana;COLOR:white;">
  &nbsp;Titul:<BR>
  <input class=input0 name="name" value="$db_micro_line{name}" style="FONT:9px Verdana;width:445px;"><BR>
  &nbsp;Rating:<BR>
  <input class=input0 name="rating" value="$db_micro_line{rating}" style="FONT:9px Verdana;width:445px;"><BR>
HEADER

 my $temp;

  $mdl_temp.=<<"HEADER";
  Popis:<br>
  <textarea name="description" rows=5 class=input0 style="FONT:9px Verdana;width:445px;" drag_resizeX='0'>$db_micro_line{description}</textarea><BR>
  <table height=16 width=100% cellspacing=0 cellpadding=0 border=0 background="$tom::H_media/grf/admin/win_top_0_back.gif"><tr><td width=50% align=right><img src="$tom::H_media/grf/admin/win_top_0_del.gif" border=0><BR></td><td><center><input type=submit drag_here value="Uložiť!" class=btn0 onclick="box_erase2();"></center></td><td align=left width=50%><img src="$tom::H_media/grf/admin/win_top_0_del.gif" border=0><BR></td></tr></table><br>
HEADER

=head1
  <TEXTAREA
	drag_resizeX='0'
	drag_resizeY='-300'
	name="indexes"
	id="indexes_all"
	class=input0
	style="width:445px;height:50px;FONT:12px Verdana;">$indexes</TEXTAREA><BR>
=cut



#<!-- <input type=hidden name=image value="$image_f"> /-->

  $mdl_temp.="</td><td></form></td></tr></table>";
  #$mdl_temp.="<script>lastOpenedArticleId=\"$db_micro_line{ID}\"; alert(lastOpenedArticleId);</script>";
  my $box=&box_create2("Úprava programovej položky",
	'color_base0'	=>	"#0B63F1",
	'width'			=>	200,
	'height'		=>	50,
	'close'			=>	"yes",
	'html'			=>	$mdl_temp);

  return $box;

  return undef;
 }
}


1;
