sub BaseModul
{
my $id=$form{id};
my $mdl_temp;

if ($form{set})
{
}
else
{
 $HTML_HEADER{BODY}{extract}="yes";

 my $selected;
 my $mdl_micro.="<div onclick=\"this.parentElement.parentElement.all['VALUE'].value='';document.frames['frm_$current_time'].location='core.pl?type=photogallery_editadd2&frm=$current_time&cathegory=';\">&nbsp;!!!none!!!</div>\n";




 my $tree_temp;
 my $tree_temp_line=<<"HEADER";
 <table width=100% cellspacing=0 cellpadding=0>
    <tr>
     <%OD%>
     <td><img src=t.gif width=3 height=1 border=0><BR></td>
     <td nowrap style="FONT:bold 11px Verdana;"></td>
	 <td>
	 <td width=100% style="FONT:9px Verdana;"
	 	onmouseover="this.style.background='blue';this.style.color='white';"
		onmouseout="this.style.background='';this.style.color='';"
		<%PLUS%>
	 ><%NAME%></td>
 	</tr>
 </table>
HEADER
my $tree_temp_od="<td <%TBG%> align=middle <%VALIGN%>><%IMG%><img src=t.gif width=11 height=1 border=0><BR></td>";
my $selected;
my $selected2;
my $db_micro1 = $dbh->Query("
	SELECT ID,fullname,tinyname
	FROM photogallery_cathegory 
	ORDER BY ID");
while (my @db_micro1_line=$db_micro1->FetchRow())
{
  my $tr_uroven=my @tr_cesta=split('',$db_micro1_line[0]);
  $tree_temp.=$tree_temp_line;
  $width=$tr_uroven*10+5;
  $tree_temp =~s|<%NAME%>|$db_micro1_line[2]|g;
  $tree_temp =~s|<%ID%>|$db_micro1_line[0]|g;
  
  my $i0=-1;
  my $od;
  while ($i0<($tr_uroven))
  {
   $i0++;
   $od .= $tree_temp_od;
   $od =~s|<%TBG%>|<%TBG-$i0%>|g;
   
   if (($i0+1) == $tr_uroven)
   {
    $od=~s|<%IMG%>|<img src=t.gif width=1 height=3 border=0><BR><img src="$tom::H_media/grf/admin/forum_0_3.gif" border=0><BR>|g;
    $tree_temp =~s|<%TBG-$i0%>|background="$tom::H_media/grf/admin/forum_0_0.gif"|g;   
   }
      
   if ($i0 == $tr_uroven)
   {
    $od=~s|<%VALIGN%>|valign=middle|g;
    $od=~s|<%IMG%>|<img src="$tom::H_media/grf/admin/tree_0.gif" border=0><BR>|g;
    $od =~s|<%TBG-$i0%>||g;
    $tree_temp =~s|<%TBG-$i0%>||g;
   }
   else
   {
    $od=~s|<%IMG%>||g;
   }
   
   $od=~s|<%VALIGN%>|valign=top|g;
  }
  $tree_temp =~s|<%OD%>|$od|g;
  $tree_temp =~s|<%BG%>|#96B2C8|g;
  $tree_temp =~s|<%PLUS%>|onclick="parentElement.parentElement.parentElement.parentElement.parentElement.all['VALUE'].value='$db_micro1_line[2]';document.frames['frm_$current_time'].location='core.pl?type=photogallery_editadd2&cathegory=$db_micro1_line[0]&frm=$current_time';"|g;
}








 $db_micro1 = $dbh->Query("SELECT ID,fullname,tinyname FROM photogallery_cathegory ORDER BY ID");
 while (@db_micro1_line=$db_micro1->FetchRow())
 {
  my $from;
  for (my $i=1;$i<length($db_micro1_line[0]);$i++){$from.="&nbsp;&nbsp;";}
  $mdl_micro.="<div onclick=\"this.parentElement.parentElement.all['VALUE'].value='$db_micro1_line[2]';document.frames['frm_$current_time'].location='core.pl?type=photogallery_editadd2&cathegory=$db_micro1_line[0]&frm=$current_time';\">&nbsp;$from$db_micro1_line[2]</div>\n";
 }
 $mdl_temp.=&select_create(
 	'name'		=>	"IDcathegory_",
	'value'		=>	"select",
	'maxlength'	=>	30,
	'width'		=>	250-12,
	'select'	=>	$tree_temp
 );

 
 $mdl_temp.=<<"HEADER";
 
 <div style="display:none;"><FORM action="core.pl?type=photogallery_editadd3&frm=$current_time" METHOD="POST" target="frm_$current_time"></div>
 
 <input type=text name="like" class=input0 style="width:190px;"><input type=submit value="Search!" class=input0 drag_here style="height:16px;width:60px;" onclicka="document.frames['frm_$current_time'].location='core.pl?type=photogallery_editadd3&like='+parentElement.all['LIKE'].value+'&frm=$current_time';">

 <div style="display:none;"></FORM></div>

 <iframe style="display:none;" name="frm_$current_time" src="core.pl?type=photogallery_editadd2" scrolling=yes onload="document.all['CON_$current_time'].innerHTML= document.frames['frm_$current_time'].document.body.innerHTML;"></iframe>
 
 <div id="CON_$current_time"
	style="	overflow:scroll;
			display:block;
			width: 250px;
			height: 300px; 
			clip: rect(0 500 500 0); 
			border: solid #000000; 
			border-width: 0px 0px 0px 0px; 
   scrollbar-face-color: #2B83FF;
   scrollbar-shadow-color: #0B63F1;
   scrollbar-highlight-color: #0B63F1;
   scrollbar-3dlight-color: #0B63F1;
   scrollbar-darkshadow-color: #0B63F1;
   scrollbar-track-color: #0B63F1;
   scrollbar-arrow-color: #000000;
			background-color: #0B63F1;">
</div>
 
HEADER
 
 my $box=&box_create2("Editor+ add image",
	'close'			=>	True,
	'open'			=>	True,
	'color_base0'	=>	"#0B63F1",
	'width'			=>	250,
	'height'		=>	50,
	'close'			=>	"yes",
	'html'			=>	$mdl_temp);
 return $box;
}
}













1;
