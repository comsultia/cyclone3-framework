sub BaseModul
{
	use Mysql;

	my $ID=$form{ID};
	if ($form{set} eq "yes")
	{
		$HTML_HEADER{BODY}{extract}="yes";

		#if ($db_micro = $dbh->Query("SELECT ID,hash,format FROM markiza_sk.a500 WHERE ID='$ID' LIMIT 4"))
		$db_micro = $dbh->Query("SELECT ID, IDquestion, votes FROM TOM.Ca410_answer WHERE ID='$ID' LIMIT 1");
		if (@db_micro_line=$db_micro->FetchRow())
		{
			$dbh->Query("DELETE FROM TOM.Ca410_answer WHERE ID='$db_micro_line[0]' LIMIT 1");

			$db_microx = $dbh->Query("SELECT ID, votes FROM TOM.Ca410 WHERE ID='$db_micro_line[1]' LIMIT 1");
			if (@db_microx_line=$db_microx->FetchRow())
			{
			$db_microx_line[1]-=$db_micro_line[2];
			$dbh->Query("UPDATE TOM.Ca410 SET votes='$db_microx_line[1]' WHERE ID='$db_micro_line[1]' LIMIT 1");
			}
		}
		return "\n<script>\nparent.document.frames['ank_frm_$form{frm}'].location.reload();\nparent.document.frames['frm_base'].location.reload();\n</script>";
	}
	else
	{
		$HTML_HEADER{BODY}{extract}="yes";

		######################################################
		# creating survey answer delete box                                           #
		######################################################

		$db_micro = $dbh->Query("SELECT ID, answer FROM TOM.Ca410_answer WHERE ID='$ID' LIMIT 1");
		if (@db_micro_line=$db_micro->FetchRow())
		{
			my $mdl_temp=<<"HEADER";
	<div class="btn-bar" style="background: url($tom::H_media/grf/admin/win_top_0_back.gif);"><img src="$tom::H_media/grf/admin/win_top_0_del.gif" border=0><input type=submit drag_here value="Zmaz:'$db_micro_line[1]'!" class="btn" onclick="load_box('core.pl?type=410-answer_del&set=yes&ID=$ID&frm=$form{frm}');box_erase();"><img src="$tom::H_media/grf/admin/win_top_0_del.gif" border=0></div>
HEADER

			my $box=&box_create2("Zmazať odpoveď",
				'color_base0'	=>	"#0B63F1",
				'width'			=>	150,
				'height'		=>	50,
				'close'			=>	"yes",
				'html'			=>	$mdl_temp);

			return $box;
		}
		return undef;
	}
}
1;